<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¢“è¾°çš„åè¯­ä¹å›­</title>
    <style>
        :root {
            --primary: #FF9A9E;
            --secondary: #a1c4fd;
            --accent: #ff6b6b;
            --text: #444;
            --bg-gradient: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
        }

        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: var(--bg-gradient);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* é€šç”¨å®¹å™¨ */
        .container {
            width: 90%;
            max-width: 800px;
            text-align: center;
            padding: 20px;
            display: none; /* é»˜è®¤éšè—ï¼Œé€šè¿‡ JS æ§åˆ¶æ˜¾ç¤º */
            animation: fadeIn 0.5s ease;
        }

        .active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* è€å¸ˆå½¢è±¡åŒºåŸŸ */
        .teacher-avatar {
            width: 150px;
            height: 150px;
            background-color: #fff;
            border-radius: 50%;
            border: 5px solid var(--primary);
            margin: 0 auto 20px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .teacher-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .speech-bubble {
            background: #fff;
            padding: 20px;
            border-radius: 20px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            font-size: 1.2em;
            color: var(--text);
        }

        .speech-bubble::after {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 0 10px 10px;
            border-style: solid;
            border-color: transparent transparent #fff;
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin: 10px;
        }

        .btn:hover {
            transform: scale(1.05);
            background: #ff8085;
        }

        .btn-secondary { background: var(--secondary); }

        /* å­¦ä¹ å¡ç‰‡ç½‘æ ¼ */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: transform 0.2s;
            border: 3px solid transparent;
        }

        .card:hover { transform: translateY(-5px); border-color: var(--secondary); }
        .card.playing { border-color: var(--accent); animation: pulse 1s infinite; }

        .card-img-placeholder {
            height: 120px;
            background: #f0f0f0;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        .card-img-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 10px;
        }

        .hanzi { font-size: 1.5em; font-weight: bold; color: #333; margin: 5px 0; }
        .pinyin { color: #888; font-size: 0.9em; }

        /* æ¸¸æˆåŒºåŸŸ */
        .game-area {
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .option-btn {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.2em;
            cursor: pointer;
        }
        
        .option-btn:hover { background: #e3f2fd; }
        .option-btn.correct { background: #d4edda; border-color: #c3e6cb; }
        .option-btn.wrong { background: #f8d7da; border-color: #f5c6cb; }

        /* æ’å­—æ¸¸æˆ */
        .sentence-scramble {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
            min-height: 60px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px dashed #ccc;
        }

        .word-tile {
            background: white;
            border: 2px solid var(--secondary);
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            user-select: none;
        }

        .word-pool { margin-top: 20px; }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        /* å¯¼èˆªæ  */
        .nav-bar {
            width: 100%;
            background: rgba(255,255,255,0.9);
            padding: 10px;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .hidden { display: none !important; }

    </style>
</head>
<body>

    <div id="intro-screen" class="container active">
        <div class="teacher-avatar">
            <img src="https://via.placeholder.com/150/FF9A9E/FFFFFF?text=è€å¸ˆ" alt="è€å¸ˆ" id="teacher-img-intro">
        </div>
        <div class="speech-bubble">
            â€œå—¨ï¼Œæ¢“è¾°ï¼Œæˆ‘æ˜¯ä½ çš„å°è€å¸ˆï¼<br>è®©æˆ‘ä»¬ä¸€èµ·æ¥å­¦åè¯­å§ï¼Œå¥½å—ï¼Ÿâ€
        </div>
        <button class="btn" onclick="startLearning()">å¥½ï¼Œå¼€å§‹å­¦ä¹ ï¼ğŸš€</button>
    </div>

    <div id="learn-screen" class="container">
        <div class="nav-bar">
            <button class="btn btn-secondary" style="font-size: 0.9em; padding: 8px 20px;" onclick="showSection('intro-screen')">ğŸ  è¿”å›</button>
            <h2>ğŸ“š ç‚¹ä¸€ç‚¹ï¼Œå¬å£°éŸ³</h2>
            <button class="btn" style="font-size: 0.9em; padding: 8px 20px;" onclick="startGames()">ç©æ¸¸æˆ ğŸ®</button>
        </div>

        <div id="cards-container" class="grid">
            </div>
        
        <div class="speech-bubble">
            â€œæ¢“è¾°ï¼Œä¸Šé¢çš„å¡ç‰‡éƒ½ç‚¹äº†å—ï¼Ÿ<br>å­¦å¥½äº†å°±ç‚¹å‡»å³ä¸Šè§’çš„â€˜ç©æ¸¸æˆâ€™å“¦ï¼â€
        </div>
    </div>

    <div id="game1-screen" class="container">
        <h2>ğŸ® æ¸¸æˆä¸€ï¼šçœ‹å›¾é€‰ä¸€é€‰</h2>
        <div class="game-area">
            <div class="card-img-placeholder" style="height: 200px;">
                <img id="quiz-img" src="" alt="Quiz Image">
            </div>
            <div id="quiz-options" class="quiz-options">
                </div>
            <p id="quiz-feedback" style="height: 20px; color: var(--accent); font-weight: bold;"></p>
        </div>
    </div>

    <div id="game2-screen" class="container">
        <h2>ğŸ® æ¸¸æˆäºŒï¼šæŠŠå¥å­æ’æ’é˜Ÿ</h2>
        <div class="game-area">
            <p>è¯·æŠŠä¸‹é¢çš„è¯è¯­æŒ‰é¡ºåºæ”¾è¿›æ¡†æ¡†é‡Œï¼š</p>
            <div id="sentence-target" class="sentence-scramble">
                </div>
            <div id="sentence-pool" class="sentence-scramble" style="border: none; background: transparent;">
                </div>
            <button class="btn" onclick="checkSentenceOrder()">æ£€æŸ¥ç­”æ¡ˆ âœ…</button>
            <p id="sentence-feedback" style="height: 20px; font-weight: bold;"></p>
        </div>
    </div>

    <div id="outro-screen" class="container">
        <div class="teacher-avatar">
            <img src="https://via.placeholder.com/150/FF9A9E/FFFFFF?text=è€å¸ˆ" alt="è€å¸ˆ" id="teacher-img-outro">
        </div>
        <div class="speech-bubble">
            â€œæ¢“è¾°çœŸæ£’ï¼ğŸ‰<br>æ‰€æœ‰çš„ä»»åŠ¡éƒ½å®Œæˆå•¦ï¼<br>æˆ‘ä»¬ä¸‹æ¬¡è§å“Ÿï¼Œæ‹œæ‹œï¼ğŸ‘‹â€
        </div>
        <button class="btn btn-secondary" onclick="location.reload()">å†ç©ä¸€æ¬¡ ğŸ”„</button>
    </div>

    <script>
        // --- æ•°æ®ä¸­å¿ƒ (åŸºäº PDF Page 1-5) ---
        // æç¤ºï¼šä½ éœ€è¦æŠŠ image å­—æ®µæ¢æˆä½ æˆªå›¾çš„æ–‡ä»¶åï¼Œä¾‹å¦‚ 'images/laoshi.jpg'
        
        const contentData = [
            // Page 1
            { type: 'word', text: 'è€å¸ˆ', pinyin: 'lÇo shÄ«', emoji: 'ğŸ‘©â€ğŸ«', page: 1 },
            { type: 'word', text: 'åŒå­¦', pinyin: 'tÃ³ng xuÃ©', emoji: 'ğŸ’', page: 1 },
            { type: 'word', text: 'å¹¼å„¿å›­', pinyin: 'yÃ²u Ã©r yuÃ¡n', emoji: 'ğŸ«', page: 1 },
            { type: 'sentence', text: 'è¿™æ˜¯æˆ‘çš„å¹¼å„¿å›­ã€‚', pinyin: 'zhÃ¨ shÃ¬ wÇ’ de yÃ²u Ã©r yuÃ¡n', emoji: 'ğŸ–¼ï¸', page: 1 },
            
            // Page 2
            { type: 'word', text: 'è¯¾å®¤', pinyin: 'kÃ¨ shÃ¬', emoji: 'ğŸ–ï¸', page: 2 },
            { type: 'word', text: 'ç”µè„‘å®¤', pinyin: 'diÃ n nÇo shÃ¬', emoji: 'ğŸ’»', page: 2 },
            { type: 'sentence', text: 'å¹¼å„¿å›­é‡Œæœ‰è¯¾å®¤ã€‚', pinyin: 'yÃ²u Ã©r yuÃ¡n lÇ yÇ’u kÃ¨ shÃ¬', emoji: 'ğŸ«', page: 2 },
            
            // Page 3
            { type: 'word', text: 'æ¸¸ä¹åœº', pinyin: 'yÃ³u lÃ¨ chÇng', emoji: 'ğŸ¡', page: 3 },
            { type: 'word', text: 'ç¤¼å ‚', pinyin: 'lÇ tÃ¡ng', emoji: 'ğŸ¤', page: 3 },
            { type: 'sentence', text: 'æ¸¸ä¹åœºæ—è¾¹æœ‰å•æ‰€ã€‚', pinyin: 'yÃ³u lÃ¨ chÇng pÃ¡ng biÄn yÇ’u cÃ¨ suÇ’', emoji: 'ğŸš½', page: 3 },

            // Page 4
            { type: 'word', text: 'å›­é•¿', pinyin: 'yuÃ¡n zhÇng', emoji: 'ğŸ‘¨â€ğŸ’¼', page: 4 },
            { type: 'sentence', text: 'è¯¾å®¤é‡Œæœ‰åŒå­¦ã€‚', pinyin: 'kÃ¨ shÃ¬ lÇ yÇ’u tÃ³ng xuÃ©', emoji: 'ğŸ‘¦ğŸ‘§', page: 4 },

            // Page 5
            { type: 'word', text: 'æ ¡è½¦å¸æœº', pinyin: 'xiÃ o chÄ“ sÄ« jÄ«', emoji: 'ğŸšŒ', page: 5 },
            { type: 'sentence', text: 'æ ¡è½¦å¸æœºæ¥é€æˆ‘ä»¬ã€‚', pinyin: 'xiÃ o chÄ“ sÄ« jÄ« jiÄ“ sÃ²ng wÇ’ men', emoji: 'ğŸš', page: 5 }
        ];

        // æ¸¸æˆæ•°æ®
        let currentQuizIndex = 0;
        const quizQuestions = [
            { correct: 'è€å¸ˆ', options: ['è€å¸ˆ', 'åŒå­¦'], emoji: 'ğŸ‘©â€ğŸ«' },
            { correct: 'æ¸¸ä¹åœº', options: ['ç¤¼å ‚', 'æ¸¸ä¹åœº'], emoji: 'ğŸ¡' },
            { correct: 'æ ¡è½¦å¸æœº', options: ['å›­é•¿', 'æ ¡è½¦å¸æœº'], emoji: 'ğŸšŒ' }
        ];

        let currentSentenceIndex = 0;
        const sentenceChallenges = [
            { text: 'è¿™æ˜¯æˆ‘çš„å¹¼å„¿å›­', parts: ['è¿™æ˜¯', 'æˆ‘çš„', 'å¹¼å„¿å›­'] },
            { text: 'å¹¼å„¿å›­é‡Œæœ‰è¯¾å®¤', parts: ['å¹¼å„¿å›­', 'é‡Œ', 'æœ‰', 'è¯¾å®¤'] },
            { text: 'è¯¾å®¤é‡Œæœ‰åŒå­¦', parts: ['è¯¾å®¤', 'é‡Œ', 'æœ‰', 'åŒå­¦'] }
        ];

        // --- æ ¸å¿ƒåŠŸèƒ½ ---

        function showSection(id) {
            document.querySelectorAll('.container').forEach(el => el.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            
            // æ¯æ¬¡åˆ‡æ¢ç•Œé¢éƒ½å°è¯•æ’­æ”¾ä¸€ç‚¹éŸ³æ•ˆæˆ–è¯­éŸ³ï¼ˆå¯é€‰ï¼‰
            if(id === 'intro-screen') speak("å—¨ï¼Œæ¢“è¾°");
            if(id === 'outro-screen') speak("æ¢“è¾°çœŸæ£’");
        }

        function speak(text, callback) {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'zh-CN';
            utterance.rate = 0.8; 
            utterance.onend = callback;
            window.speechSynthesis.speak(utterance);
        }

        // --- å­¦ä¹ æ¨¡å¼ ---
        function startLearning() {
            showSection('learn-screen');
            const container = document.getElementById('cards-container');
            container.innerHTML = '';

            contentData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card';
                // è¿™é‡Œä½¿ç”¨Emojiä½œä¸ºå ä½ç¬¦ï¼Œç”¨æˆ·æœ‰äº†å›¾ç‰‡åï¼Œä»£ç ä¼šè‡ªåŠ¨ä¼˜å…ˆåŠ è½½imgæ ‡ç­¾
                // å¦‚æœç”¨æˆ·æ²¡æœ‰è®¾ç½® contentData é‡Œçš„ image è·¯å¾„ï¼Œåˆ™æ˜¾ç¤º Emoji
                const visual = item.image ? 
                    `<img src="${item.image}" style="width:100%; height:100%; object-fit:contain;">` : 
                    item.emoji;

                card.innerHTML = `
                    <div class="card-img-placeholder">${visual}</div>
                    <div class="hanzi">${item.text}</div>
                    <div class="pinyin">${item.pinyin}</div>
                `;
                
                card.onclick = () => {
                    card.classList.add('playing');
                    speak(item.text, () => card.classList.remove('playing'));
                };
                
                container.appendChild(card);
            });
            
            speak("è¿™æ˜¯å­¦ä¹ å¡ç‰‡ï¼Œç‚¹å‡»å®ƒä»¬å¬å¬æ€ä¹ˆè¯»");
        }

        // --- æ¸¸æˆæµç¨‹æ§åˆ¶ ---
        function startGames() {
            currentQuizIndex = 0;
            currentSentenceIndex = 0;
            speak("æˆ‘ä»¬æ¥ç©ä¸ªæ¸¸æˆå§ï¼Œçœ‹å›¾é€‰ç­”æ¡ˆ");
            loadQuiz();
            showSection('game1-screen');
        }

        // --- æ¸¸æˆ 1: é€‰æ‹©é¢˜ ---
        function loadQuiz() {
            if (currentQuizIndex >= quizQuestions.length) {
                // è¿›å…¥ä¸‹ä¸€ä¸ªæ¸¸æˆ
                speak("å¤ªæ£’äº†ï¼Œç°åœ¨æˆ‘ä»¬æ¥ç©æ’å­—æ¸¸æˆ");
                loadSentenceGame();
                showSection('game2-screen');
                return;
            }

            const q = quizQuestions[currentQuizIndex];
            // æ›´æ–°å›¾ç‰‡ (åŒæ ·é€»è¾‘ï¼Œæœ‰å›¾ç”¨å›¾ï¼Œæ²¡å›¾ç”¨Emoji)
            const imgContainer = document.getElementById('quiz-img');
            // ä¸ºäº†æ¼”ç¤ºï¼Œè¿™é‡Œç”¨ Placeholder æœåŠ¡ç”Ÿæˆå¸¦æ–‡å­—çš„å›¾ï¼Œå®é™…ä½¿ç”¨æ—¶è¯·æ¢æˆ q.image
            imgContainer.src = q.image || `https://via.placeholder.com/300x200/a1c4fd/fff?text=${q.emoji}`; 
            
            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = '';
            document.getElementById('quiz-feedback').innerText = '';

            // æ‰“ä¹±é€‰é¡¹é¡ºåº
            const shuffledOptions = [...q.options].sort(() => Math.random() - 0.5);

            shuffledOptions.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = opt;
                btn.onclick = () => checkQuizAnswer(opt, q.correct, btn);
                optionsContainer.appendChild(btn);
            });
        }

        function checkQuizAnswer(selected, correct, btnElement) {
            if (selected === correct) {
                btnElement.classList.add('correct');
                document.getElementById('quiz-feedback').innerText = "ç­”å¯¹å•¦ï¼çœŸæ£’ï¼ğŸŒŸ";
                speak("ç­”å¯¹å•¦", () => {
                    setTimeout(() => {
                        currentQuizIndex++;
                        loadQuiz();
                    }, 1000);
                });
            } else {
                btnElement.classList.add('wrong');
                document.getElementById('quiz-feedback').innerText = "ä¸å¯¹å“¦ï¼Œå†è¯•ä¸€æ¬¡ã€‚";
                speak("ä¸å¯¹å“¦");
            }
        }

        // --- æ¸¸æˆ 2: æ’å­—æ¸¸æˆ ---
        function loadSentenceGame() {
            if (currentSentenceIndex >= sentenceChallenges.length) {
                // å…¨éƒ¨é€šå…³
                showSection('outro-screen');
                return;
            }

            const challenge = sentenceChallenges[currentSentenceIndex];
            const pool = document.getElementById('sentence-pool');
            const target = document.getElementById('sentence-target');
            document.getElementById('sentence-feedback').innerText = '';
            
            pool.innerHTML = '';
            target.innerHTML = '';

            // æ‰“ä¹±è¯è¯­
            const shuffledParts = [...challenge.parts].sort(() => Math.random() - 0.5);

            shuffledParts.forEach(word => {
                const tile = document.createElement('div');
                tile.className = 'word-tile';
                tile.innerText = word;
                tile.onclick = function() {
                    // ç‚¹å‡»è¯è¯­ï¼Œåœ¨â€œç›®æ ‡åŒºâ€å’Œâ€œå¤‡é€‰åŒºâ€ä¹‹é—´ç§»åŠ¨
                    if (this.parentElement === pool) {
                        target.appendChild(this);
                    } else {
                        pool.appendChild(this);
                    }
                };
                pool.appendChild(tile);
            });
        }

        function checkSentenceOrder() {
            const challenge = sentenceChallenges[currentSentenceIndex];
            const userWords = Array.from(document.getElementById('sentence-target').children).map(el => el.innerText);
            const userSentence = userWords.join('');
            
            // ç®€å•å»é™¤æ ‡ç‚¹æ¯”è¾ƒ
            const cleanTarget = challenge.text.replace(/[ã€‚ï¼Œ]/g, '');
            const cleanUser = userSentence.replace(/[ã€‚ï¼Œ]/g, '');

            if (cleanUser === cleanTarget) {
                document.getElementById('sentence-feedback').innerText = "æ’å¯¹å•¦ï¼æ¢“è¾°å¥½å‰å®³ï¼ğŸ‰";
                document.getElementById('sentence-feedback').style.color = "green";
                speak("æ’å¯¹å•¦", () => {
                    setTimeout(() => {
                        currentSentenceIndex++;
                        loadSentenceGame();
                    }, 1500);
                });
            } else {
                document.getElementById('sentence-feedback').innerText = "é¡ºåºå¥½åƒä¸å¯¹ï¼Œå†è¯»ä¸€éï¼Ÿ";
                document.getElementById('sentence-feedback').style.color = "red";
                speak("é¡ºåºå¥½åƒä¸å¯¹");
            }
        }

    </script>
</body>
</html>
